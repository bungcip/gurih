// Integration Rules for other modules to post to Finance

posting_rule "InvoicePosting" for="Invoice" {
    description "\"Invoice #\" + doc.invoice_number"
    date "doc.date"

    entry {
        account "accounts_receivable"
        debit "doc.total_amount"

        // Link to Customer Sub-ledger
        set "party_type" "'Customer'"
        set "party_id" "doc.customer_id"
    }

    entry {
        account "sales_revenue"
        credit "doc.total_amount"
    }
}

posting_rule "PayrollPosting" for="PayrollRun" {
    description "\"Payroll for \" + doc.period_name"
    date "doc.payment_date"

    entry {
        account "salaries_expense"
        debit "doc.total_gross_pay"
    }

    entry {
        account "tax_payable"
        credit "doc.total_tax"
    }

    entry {
        account "cash"
        credit "doc.total_net_pay"
    }
}
